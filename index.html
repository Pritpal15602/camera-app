<!DOCTYPE html>
<html>

<head>
    <title>Camera Click and Compress Image (Including Preview)</title>

     
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
   <script src="https://compressjs.herokuapp.com/compress.js"></script>


</head>

<body>
    
	
	

  
 <div class="container">
  <div class="row">
    <div class="col-sm-12">
	
	<div class="col-sm-12">
			<div id="camImage" >
			<label for="upload" class="custom-file-upload">
			<image src="android-chrome-192x192.png"></image>
			</label>
			<input type="file" name="" id="upload" accept="image/*;capture=camera" capture="camera" style="display:none" >
			</div>
	</div>
	<div class="col-sm-12">		
			
		
			<div id="Preview1">
			<img src="" alt="" id="preview" height="300px" width="300px"><br/></br>
			<a onclick="Del1()" style="padding:10px;"> <image src="https://image.flaticon.com/icons/png/512/61/61848.png"  height="40px" width="40px" id="delNo"></a>
			
			</div>
	</div>	
    </div>
    
     
   
  </div>
</div>
 
  
  
  
  
  
  <form action="">
    <div class="form-group">
	

			
		
		</div>
    </div>
    <div class="form-group">
      
    </div>
    
  </form>

	
	
	

	
	
	
	
	

	
	
	<!-- <form action="server.cgi" method="post" enctype="multipart/form-data"> -->
  <!-- <input type="file" name="image" accept="image/*;capture=camera" capture="camera"> -->
  <!-- <input type="submit" value="Upload"> -->
<!-- </form> -->
	
	<script type="text/javascript">
	
	
	$( document ).ready(function() {
	
	$("#Preview1").hide();
    
	});
	
	function Del1()
	{
	//$("#preview").attr("src","")
	$("#Preview1").hide();
	$("#camImage").show();
	}
	
	
	
		const compress = new Compress()
		const preview = document.getElementById('preview')
		const output = document.getElementById('output')

		const upload = document.getElementById('upload')

		upload.addEventListener('change', (evt) => {
		
		  const files = [...evt.target.files]
		  compress.compress(files, {
			size: 4, // the max size in MB, defaults to 2MB
			quality: 0.75, // the quality of the image, max is 1,
			maxWidth: 1920, // the max width of the output image, defaults to 1920px
			maxHeight: 1920, // the max height of the output image, defaults to 1920px
			resize: true // defaults to true, set false if you do not want to resize the image width and height
		  }).then((images) => {
			//console.log(images)
			const img = images[0]
			// returns an array of compressed images
			preview.src = `${img.prefix}${img.data}`
			//console.log(img)
			$("#camImage").hide();
			$("#Preview1").show();
		

			const { endSizeInMb, initialSizeInMb, iterations, sizeReducedInPercent, elapsedTimeInSeconds, alt } = img

			//output.innerHTML = `<b>Start Size:</b> ${initialSizeInMb} MB <br/><b>End Size:</b> ${endSizeInMb} MB <br/><b>Compression Cycles:</b> ${iterations} <br/><b>Size Reduced:</b> ${sizeReducedInPercent} % <br/><b>File Name:</b> ${alt}`
		  })
		}, false)


	</script>
	

</body>

</html>
